# ==============================================
# Face Recognition System - Configuration
# ==============================================

# ------------------------------------------
# Application Settings
# ------------------------------------------
APP_NAME="Face Recognition System"
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# ------------------------------------------
# API Settings
# ------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_SECRET_KEY=your-secret-key-change-in-production

# ------------------------------------------
# Database (Local)
# ------------------------------------------
DB_TYPE=folder
DB_PATH=./face_database
DB_BACKUP_ENABLED=true

# ------------------------------------------
# Face Recognition
# ------------------------------------------
FACE_DETECTION_MODEL=hog
FACE_RECOGNITION_TOLERANCE=0.6
MIN_FACE_SIZE=50
MAX_FACES_PER_IMAGE=10

# ------------------------------------------
# Storage (Local)
# ------------------------------------------
STORAGE_TYPE=local
STORAGE_PATH=./faces
MAX_FILE_SIZE=10485760

# ------------------------------------------
# Security
# ------------------------------------------
ENABLE_CORS=true
JWT_SECRET_KEY=your-jwt-secret-key
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600

# ------------------------------------------
# Monitoring
# ------------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090

# ==============================================
# AWS Cloud Configuration
# ==============================================

# ------------------------------------------
# AWS General
# ------------------------------------------
# Set to 'true' to enable AWS cloud features
AWS_ENABLED=false

# AWS Region (where your resources are deployed)
AWS_REGION=ap-southeast-1

# AWS Account ID (12-digit number)
AWS_ACCOUNT_ID=829717935400

# ------------------------------------------
# AWS S3 Storage
# ------------------------------------------
# S3 bucket name for image storage
# Example: face-recognition-images-dev
AWS_S3_BUCKET=

# S3 key prefixes (folder structure in bucket)
AWS_S3_ENROLLMENT_PREFIX=enrollments/
AWS_S3_IDENTIFICATION_PREFIX=identifications/

# ------------------------------------------
# AWS DynamoDB
# ------------------------------------------
# Table names (should match CDK deployment)
AWS_DYNAMODB_PEOPLE_TABLE=face-recognition-people-dev
AWS_DYNAMODB_EMBEDDINGS_TABLE=face-recognition-embeddings-dev
AWS_DYNAMODB_MATCHES_TABLE=face-recognition-matches-dev

# ------------------------------------------
# AWS Rekognition
# ------------------------------------------
# Rekognition collection ID
# Example: face-recognition-collection-dev
AWS_REKOGNITION_COLLECTION=

# Rekognition confidence threshold (0-100, default 70)
AWS_REKOGNITION_MIN_CONFIDENCE=70.0

# Maximum faces to return in search results
AWS_REKOGNITION_MAX_FACES=5

# ------------------------------------------
# AWS SQS (Optional - for async processing)
# ------------------------------------------
# SQS queue URL for background jobs
# Example: https://sqs.ap-southeast-1.amazonaws.com/829717935400/face-recognition-queue-dev
AWS_SQS_QUEUE_URL=

# ------------------------------------------
# Hybrid Mode
# ------------------------------------------
# If true: Use AWS when available, fallback to local on error
# If false: Fail if AWS is enabled but not working
HYBRID_MODE=true

# ==============================================
# AWS Credentials (for local development)
# ==============================================
# NOTE: For production, use IAM roles instead of hardcoding credentials
# These are only needed for local development/testing

# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key

# ==============================================
# Quick Start Examples
# ==============================================

# -----------------------------------------------
# Example 1: Local-Only Mode (Default)
# -----------------------------------------------
# AWS_ENABLED=false
# HYBRID_MODE=true
# All data stored locally in face_database/ and faces/

# -----------------------------------------------
# Example 2: Hybrid Mode (Recommended)
# -----------------------------------------------
# AWS_ENABLED=true
# HYBRID_MODE=true
# AWS_REGION=ap-southeast-1
# AWS_S3_BUCKET=face-recognition-images-dev
# AWS_REKOGNITION_COLLECTION=face-recognition-collection-dev
# Uses AWS when available, falls back to local on error

# -----------------------------------------------
# Example 3: Cloud-Only Mode
# -----------------------------------------------
# AWS_ENABLED=true
# HYBRID_MODE=false
# AWS_REGION=ap-southeast-1
# AWS_S3_BUCKET=face-recognition-images-dev
# AWS_REKOGNITION_COLLECTION=face-recognition-collection-dev
# Fails if AWS is not available (strict cloud-native mode)

# ==============================================
# Deployment Steps
# ==============================================
# 
# 1. Copy this file to .env:
#    cp .env.example .env
# 
# 2. Edit .env with your actual values
# 
# 3. For AWS setup:
#    - Deploy CDK infrastructure: cd deployment/cdk && cdk deploy --all
#    - Get resource names from CDK outputs
#    - Update AWS_* variables in .env
# 
# 4. For local development:
#    - Install dependencies: pip install -r requirements.txt
#    - Run API: python -m src.api.app
#    - Run GUI: python src/gui/app.py
# 
# 5. For production:
#    - Use AWS Secrets Manager for credentials
#    - Enable CloudWatch logging
#    - Use IAM roles instead of access keys
# 
# ==============================================

# ==============================================
# Troubleshooting
# ==============================================
# 
# Issue: "boto3.exceptions.NoCredentialsError"
# Solution: Set AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY or configure AWS CLI
# 
# Issue: "ResourceNotFoundException: Collection not found"
# Solution: Create Rekognition collection or check AWS_REKOGNITION_COLLECTION value
# 
# Issue: "AccessDeniedException"
# Solution: Check IAM permissions for S3, DynamoDB, Rekognition
# 
# Issue: Images not uploading to S3
# Solution: Verify AWS_S3_BUCKET exists and has correct permissions
# 
# For more help, see: docs/AWS_FIRST_ARCHITECTURE.md
# 
# ==============================================
