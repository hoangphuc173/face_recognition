<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-11-20T03:00:00.000Z" agent="Mozilla/5.0" version="22.1.11" etag="identify-flow" type="device">
  <diagram name="Identification Flow" id="identify-sequence">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" background="#ffffff">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Title -->
        <mxCell id="title" value="Face Recognition - Identification Sequence Diagram" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="800" height="40" as="geometry"/>
        </mxCell>
        
        <!-- Lifelines -->
        <mxCell id="client-lifeline" value="Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#E1D5E7;strokeColor=#9673A6;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="100" width="100" height="1000" as="geometry"/>
        </mxCell>
        
        <mxCell id="api-lifeline" value="API Gateway" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#FFF2CC;strokeColor=#D6B656;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="280" y="100" width="120" height="1000" as="geometry"/>
        </mxCell>
        
        <mxCell id="lambda-lifeline" value="IdentifyFunction" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#FFE6CC;strokeColor=#D79B00;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="480" y="100" width="130" height="1000" as="geometry"/>
        </mxCell>
        
        <mxCell id="ssm-lifeline" value="SSM" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#FCE4EC;strokeColor=#C7131F;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="690" y="100" width="100" height="1000" as="geometry"/>
        </mxCell>
        
        <mxCell id="rek-lifeline" value="Rekognition" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#E8F5E9;strokeColor=#277116;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="870" y="100" width="120" height="1000" as="geometry"/>
        </mxCell>
        
        <mxCell id="ddb-lifeline" value="DynamoDB" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#E3F2FD;strokeColor=#3334B9;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1070" y="100" width="100" height="1000" as="geometry"/>
        </mxCell>
        
        <!-- Messages -->
        <mxCell id="msg1" value="1. POST /identify (image, use_case)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#8B5CF6;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="150" y="200" as="sourcePoint"/>
            <mxPoint x="340" y="200" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg2" value="2. Invoke Lambda" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#FF9900;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="340" y="240" as="sourcePoint"/>
            <mxPoint x="545" y="240" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg3" value="3. GetParameter (threshold)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#C7131F;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="545" y="280" as="sourcePoint"/>
            <mxPoint x="740" y="280" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg4" value="4. threshold value (90/95/98%)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#C7131F;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="740" y="320" as="sourcePoint"/>
            <mxPoint x="545" y="320" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg5" value="5. Decode Base64 image" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=none;endFill=0;strokeWidth=2;strokeColor=#666666;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="545" y="360" as="sourcePoint"/>
            <mxPoint x="545" y="390" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg6" value="6. SearchFacesByImage(image)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#277116;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="545" y="430" as="sourcePoint"/>
            <mxPoint x="930" y="430" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg7" value="7. Detect &amp; Search collection" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=none;endFill=0;strokeWidth=2;strokeColor=#666666;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="930" y="470" as="sourcePoint"/>
            <mxPoint x="930" y="500" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg8" value="8. matches[] (face_id, similarity)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#277116;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="930" y="540" as="sourcePoint"/>
            <mxPoint x="545" y="540" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg9" value="9. Filter by threshold" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=none;endFill=0;strokeWidth=2;strokeColor=#666666;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="545" y="580" as="sourcePoint"/>
            <mxPoint x="545" y="610" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="alt-frame" value="alt" style="shape=umlFrame;whiteSpace=wrap;html=1;width=60;height=30;fillColor=#FFF9E6;strokeColor=#F9A825;" vertex="1" parent="1">
          <mxGeometry x="460" y="640" width="730" height="280" as="geometry"/>
        </mxCell>
        
        <mxCell id="alt-condition1" value="[Match found &amp; confidence >= threshold]" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="470" y="650" width="300" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="msg10" value="10. Query Users table" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#3334B9;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="545" y="690" as="sourcePoint"/>
            <mxPoint x="1120" y="690" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg11" value="11. User details (name, metadata)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#3334B9;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1120" y="730" as="sourcePoint"/>
            <mxPoint x="545" y="730" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg12" value="12. Log access to AccessLogs table" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#3334B9;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="545" y="770" as="sourcePoint"/>
            <mxPoint x="1120" y="770" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg13" value="13. Success" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#3334B9;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1120" y="810" as="sourcePoint"/>
            <mxPoint x="545" y="810" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="alt-divider" value="" style="line;strokeWidth=2;html=1;strokeColor=#F9A825;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="840" width="730" height="10" as="geometry"/>
        </mxCell>
        
        <mxCell id="alt-condition2" value="[No match OR confidence &lt; threshold]" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="470" y="850" width="300" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="msg14-alt" value="Return: No match / Low confidence" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=none;endFill=0;strokeWidth=2;strokeColor=#666666;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="545" y="880" as="sourcePoint"/>
            <mxPoint x="545" y="900" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg15" value="14. Response" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#FF9900;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="545" y="940" as="sourcePoint"/>
            <mxPoint x="340" y="940" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg16" value="15. {match, person_id, name, confidence}" style="edgeStyle=orthogonalEdgeStyle;html=1;align=center;verticalAlign=middle;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#8B5CF6;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="340" y="980" as="sourcePoint"/>
            <mxPoint x="150" y="980" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Notes -->
        <mxCell id="note1" value="Use Cases:&#xa;- attendance: 90%&#xa;- access_control: 95%&#xa;- financial: 98%" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#FCE4EC;strokeColor=#C7131F;fontSize=12;align=left;" vertex="1" parent="1">
          <mxGeometry x="1250" y="200" width="180" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="note2" value="Response Types:&#xa;✓ Match found&#xa;✗ No match&#xa;⚠ Low confidence" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#FFF9E6;strokeColor=#F9A825;fontSize=12;align=left;" vertex="1" parent="1">
          <mxGeometry x="1250" y="330" width="180" height="100" as="geometry"/>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
